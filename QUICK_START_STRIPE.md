# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: Stripe + Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞ 5 –º–∏–Ω—É—Ç

### 1. –ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á–∏ Stripe (2 –º–∏–Ω—É—Ç—ã)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [stripe.com](https://stripe.com)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Developers** ‚Üí **API keys**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Publishable key** (pk_test_...)
   - **Secret key** (sk_test_...)

### 2. –°–æ–∑–¥–∞–π—Ç–µ Telegram –±–æ—Ç–∞ (2 –º–∏–Ω—É—Ç—ã)

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot` –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–∞—à–µ–º—É –±–æ—Ç—É
5. –ù–∞–π–¥–∏—Ç–µ [@userinfobot](https://t.me/userinfobot) –∏ –ø–æ–ª—É—á–∏—Ç–µ –≤–∞—à Chat ID

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (1 –º–∏–Ω—É—Ç–∞)

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env.local` –∏–ª–∏ `.env`:

```env
# Stripe
STRIPE_SECRET_KEY=sk_test_–≤–∞—à_–∫–ª—é—á
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_–≤–∞—à_–∫–ª—é—á

# Telegram
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
TELEGRAM_CHAT_ID=–≤–∞—à_chat_id

# URL
NEXT_PUBLIC_BASE_URL=http://localhost:3000
```

### 4. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Å–æ Stripe

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä
npm run dev

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
curl -X POST http://localhost:3000/api/sync-stripe \
  -H "Content-Type: application/json" \
  -d '{"syncAll": true}'
```

### 5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ!

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç: http://localhost:3000
2. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∫–∞—Ä—Ç—É: `4242 4242 4242 4242`
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram!

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –î–ª—è Production:

1. **–ü–æ–ª—É—á–∏—Ç–µ live –∫–ª—é—á–∏ Stripe**:
   - –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç Stripe
   - –ó–∞–º–µ–Ω–∏—Ç–µ test –∫–ª—é—á–∏ –Ω–∞ live –∫–ª—é—á–∏

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook**:
   ```
   URL: https://–≤–∞—à-–¥–æ–º–µ–Ω.com/api/webhooks/stripe
   –°–æ–±—ã—Ç–∏—è:
   - checkout.session.completed
   - payment_intent.succeeded
   - payment_intent.payment_failed
   ```

3. **–û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
   ```env
   STRIPE_SECRET_KEY=sk_live_...
   NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_...
   STRIPE_WEBHOOK_SECRET=whsec_...
   NEXT_PUBLIC_BASE_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.com
   ```

4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã**:
   ```bash
   curl -X POST https://–≤–∞—à-–¥–æ–º–µ–Ω.com/api/sync-stripe \
     -H "Content-Type: application/json" \
     -d '{"syncAll": true}'
   ```

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ [STRIPE_INTEGRATION.md](./STRIPE_INTEGRATION.md)

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç?
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ Chat ID
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É

### Stripe checkout –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è?
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–¥—É–∫—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Stripe CLI
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ STRIPE_WEBHOOK_SECRET

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤–∞—à –º–∞–≥–∞–∑–∏–Ω –≥–æ—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏!
